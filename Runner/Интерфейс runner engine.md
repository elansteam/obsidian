## Аргументы вызова движка
Runner принимает структуру, которую можно описать следующим JSON-файлом: 
```json
{
	"limits": {
		"cpu_time_limit": 1000,
		"real_time_limit": 5000,
		"memory_limit": 1048576,
		"allow_write_files": false,
		"allow_read_files": false,
		"threads_amount": 1, // пока не поддерживается, значение игнорируется runner'ом
	},
	"executable_path": "/usr/bin/g++",
	"args": ["val.cpp", "-Wall", "-O2", "-o", "val.o"],
	"working_dir": "/elan/tmp/bananas",
	"streams": {
		"forward_streams": true,
		"input_stream_file": "input.txt",
		"output_stream_file": "output.txt",
		"error_stream_file": "error.txt"
	}
}
```
Параметры этой структуры:
- `limits: Limits` - ограничения процесса в изолированной среде.
	- `cpu_time_limit: int` - ограничение процессорного времени выполнения (в миллисекундах). При превышении процесс немедленно убивается, в качестве вердикта возвращается TL.
	- `real_time_limit: int` - ограничение реального времени выполнения (в миллисекундах). При превышении процесс немедленно убивается, в качестве вердикта возвращается IL.
	- `memory_limit: int` - ограничение потребляемой памяти (в байтах). При превышении процесс немедленно убивается, в качестве вердикта возвращается ML.
	- `allow_write_files: bool = false` - разрешено ли исполняемой программе выполнять запись в файлы (по умолчанию **false**)
	- `allow_read_files: bool = false` - разрешено ли исполняемой программе читать файлы (по умолчанию **false**)
	- `threads_amount: int = 1` - максимальное число запущенных потоков (по умолчанию **1**). Сейчас движок **игнорирует** значение данного параметра и разрешает исполняемой программе запускать только один поток, однако в будущем другие значения лимитов будут применяться.
- `executable_path: str` - абсолютный путь к исполняемому файлу
- `args: list[str]` - список аргументов для запуска программы
- `working_dir: str` - абсолютный путь к рабочей директории (которая будет доступна в оболочке как "."). Фактически, runner выполняет системный вызов `chdir`. Например, если поставить `working_dir = ${ELAN_RUNNER_ENV}`, вы сможете импортировать локальные файлы в Python или линковать их через `-I.` в `g++`. Также может быть удобно поставить `working_dir = /elan/files/` - служебную директорию системы, в которой лежат необходимые для тестирования файлы (включая `testlib.h`, [[Библиотека тестирования Elan|библиотеку тестирования Elan]] `libelantesting.h`, стандартные чекеры и некоторые другие).
- `streams: Streams` - настройки стандартных потоков программы.
	- `forward_stream: bool` - нужно ли перенаправлять стандартные потоки процесса (stdin, stderr, stdout) в файлы. Если программа сама по себе совершает файловый ввод/вывод, нужно отключить перенаправление потоков (чтобы движок не перезаписал файлы пустыми значениями), а также разрешить программе работать с файлами (`limits.allow_write_files, limits.allow_read_files`)
	- `input_stream_file: str` - абсолютный путь к файлу, на который будет перенаправлен stdin процесса
	- `output_stream_file: str` - абсолютный путь к файлу, на который будет перенаправлен stdout процесса
	- `error_stream_file: str` - абсолютный путь к файлу, на который будет перенаправлен stderr процесса

## Что возвращает движок
Движок возвращает структуру, которую можно описать следующим JSON-файлом:
```json
{
	"verdict": "OK",
	"exit_code": 0,
	"stats": {
		"threads": 1,
		"cpu_time": 247,
		"real_time": 313,
		"memory": 2604
	},
	"details": ""
}
```
Параметры этой структуры:
- `verdict: str` - вердикт, смотреть [[Вердикты Elan#Вердикты runner'а|вердикты]]
- `exit_code: int` - код завершения процесса
- `stats: Stats` - статистика
	- `thread: int` - число использованных потоков
	- `cpu_time: int` - процессорное время в миллисекундах
	- `real_time: int` - реальное время в миллисекундах
	- `memory: int` - используемая память в байтах
- `details: str` - дополнительная информация от runner'а. Например, какой-то отладочный вывод при ошибке тестирования или комментарии при вердикте SE.

![[Вердикты Elan#Вердикты runner'а]]
